version: '3.8'

# Test Scenario 2: Skip Keyspace and Role Init
# - INIT_SYSTEM_KEYSPACES_AND_ROLES=false
# - Expected: semaphore written immediately, healthcheck passes

services:
  cassandra-test2:
    image: axondb-timeseries:latest
    container_name: cassandra-test2
    hostname: cassandra-test2
    networks:
      - test-net
    environment:
      - CASSANDRA_CLUSTER_NAME=TestSkipInit
      - CASSANDRA_DC=dc1
      - CASSANDRA_RACK=rack1
      - CASSANDRA_HEAP_SIZE=2G
      - INIT_SYSTEM_KEYSPACES_AND_ROLES=false
    volumes:
      - test2-data:/var/lib/cassandra
      - test2-logs:/var/log/cassandra
    ports:
      - "9042:9042"

networks:
  test-net:
    driver: bridge

volumes:
  test2-data:
  test2-logs:
