AxonDB Search Comprehensive Smoke Test Suite
=============================================

Test results will be saved to: /linuxdevelopment/github/axonops-containers/axonops/axondb-search/opensearch/3.3.2/tests/smoke-test-results.txt

Configuration:
  Container: opensearch-smoke-test
  URL: https://localhost:9200
  Custom User: axonops

========================================
AUTHENTICATION TESTS
========================================

Test 1: Authentication required (no credentials)
[0;32mâœ“ PASS[0m: Authentication required (got 401 Unauthorized)
Test 2: Default admin credentials work
[0;32mâœ“ PASS[0m: Default admin credentials work (got 200 OK)
Test 3: Wrong credentials fail
[0;32mâœ“ PASS[0m: Wrong credentials fail (got 401 Unauthorized)
Test 4: Custom user credentials work
[0;32mâœ“ PASS[0m: Custom user credentials work (got 200 OK)

========================================
CLUSTER HEALTH TESTS
========================================

Test 5: Cluster health not red
[0;32mâœ“ PASS[0m: Cluster health is green (not red)
Test 6: At least one node present
[0;32mâœ“ PASS[0m: Node count: 1 (>= 1)
Test 7: Node state is healthy
[0;32mâœ“ PASS[0m: Node state is healthy

========================================
INDEX & DOCUMENT CRUD TESTS
========================================

Test 8: Create index: test-smoke-1765790227
[0;32mâœ“ PASS[0m: Index created successfully
Test 9: Create document
[0;32mâœ“ PASS[0m: Document created (ID: OnJMIZsBeMVuua5CnX4C)
Test 10: Retrieve document by ID
[0;32mâœ“ PASS[0m: Document retrieved successfully
Test 11: Search for document
[0;31mâœ— FAIL[0m: Document search
  Reason: Expected 1 hit, got 
Test 12: Delete document
[0;32mâœ“ PASS[0m: Document deleted successfully
Test 13: Delete index
[0;32mâœ“ PASS[0m: Index deleted successfully

========================================
HEALTHCHECK SCRIPT TESTS
========================================

Test 14: Startup healthcheck
[0;32mâœ“ PASS[0m: Startup healthcheck returns exit code 0
Test 15: Liveness healthcheck
[0;32mâœ“ PASS[0m: Liveness healthcheck returns exit code 0
Test 16: Readiness healthcheck
[0;32mâœ“ PASS[0m: Readiness healthcheck returns exit code 0

========================================
PERFORMANCE & BULK TESTS
========================================

Test 17: Bulk insert 1000 documents
[0;32mâœ“ PASS[0m: Bulk indexed 1000 documents in 0s
Test 18: Verify bulk documents are indexed
[0;32mâœ“ PASS[0m: All 1000 documents indexed correctly
Test 19: Simple search query performance
[0;32mâœ“ PASS[0m: Search query returned 1 result in 28ms (< 1000ms)
Cleaning up bulk test index...

========================================
DATA PERSISTENCE TESTS
========================================

Test 20: Create persistent index with data
[0;32mâœ“ PASS[0m: Created index with 2 documents
Test 21: Read data and verify
[0;32mâœ“ PASS[0m: Data read back correctly (2 documents found)
Test 22: Verify index exists in data directory
[0;32mâœ“ PASS[0m: Index data exists in /var/lib/opensearch (found 5 indices)
Cleaning up persistence test index...

========================================
SEMAPHORE & INIT SCRIPT TESTS
========================================

Test 23: Semaphore file exists
[0;32mâœ“ PASS[0m: Semaphore file exists
Test 24: Semaphore has RESULT field
[0;32mâœ“ PASS[0m: Semaphore RESULT=success
Test 25: Custom user recorded in semaphore
[0;32mâœ“ PASS[0m: Custom user axonops recorded in semaphore
Test 26: Init script log exists and shows success
[0;32mâœ“ PASS[0m: Init script log shows successful user creation

========================================
PROCESS FAILURE DETECTION TESTS
========================================

Test 27: Healthcheck detects killed process
[0;32mâœ“ PASS[0m: Liveness healthcheck correctly detected process failure (exit code 1)

========================================
ENVIRONMENT VARIABLE TESTS
========================================

Test 28: OPENSEARCH_CLUSTER_NAME applied
